<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/assets/css/mainpage.css">
</head>
<body>
<th:block th:insert="~{/common/nav}"></th:block>


<div class="mainPage">


    <th:block th:insert="~{/common/header}"></th:block>
    <div class="container">
        <div class="box1">
            <div class="profile">
                <img src="/image/프로필.png" alt="프로필">
            </div>
            <div class="profile-details">
                <h2 id="profileName" th:text="${profile.name}"></h2>
                <p id="profileNumber">([[${profile.pmCode}]])</p>
                <p id="profilePosition" th:text="${profile.getPositionDTO().getPositionName()}"></p>
                <p id="profileSpecialty" th:text="${profile.getMedicalFieldDTO().getFieldName()}"></p>
                <p id="profilePhoneNumber" th:text="${profile.getOfficeNum()}"></p>
                <p id="profileEmail" th:text="${profile.getEmail()}"></p>

            </div>
        </div>

        <div class="box2">
            <form method="get" id="formmer">
                <div>
                    <fieldset class="patientinfo">
                        <legend>Patient Info</legend>
                        <label for="patientName"> 환자 이름  :</label>
                        <input type="text" name="person" id="patientName"/><br>
                        <label for="patientNum"> 환자 번호  :</label>
                        <input type="text" name="person" id="patientNum"/><br>
                        <label for="phone">휴대폰 번호 : </label>
                        <input type="tel" name="tell" id="phone" placeholder="010-0000-0000" pattern="(01[0-9]{1}-[0-9]{3,4}-[0-9]{4})"/><br>
                    </fieldset>
                </div>
                <div><br>
                    <br>
                    <fieldset class="timeslot">
                        <legend>TimeSlot</legend>
                        <label>날짜 및 시간 :</label>
                        <input type="date" name="reservation_date"/>
                        <input type="time" name="reservation_time" min="09:00" max="20:00"/>
                        <br>
                        <label for="position">증상 및 진단 정보:  </label>
                        <textarea name="contents" cols="30" row="60" id="position"></textarea>
                    </fieldset>
                </div>
                <br>
                <span id="inputter">
                        <input type="submit" value="예약"></input>
                        <input type="reset" value="취소"></input>
                    </span>
                <div>
                    <br>
                    <br>
                    <button id="newProject">New Project</button>
                </div>
            </form>

        </div>
        <div class="box3">
            <fieldset class="timeslot" id="timeslot">
                <legend>Scheduler</legend>
                <!-- <h2>Scheduler</h2> -->
                <div class="schedule-item">
<!--                    <p>24.01.30 (목)</p>-->
                    <p id="today"></p>
                </div>
                <th:block th:each="project : ${projects}">
                    <div class="schedule-item">
                        <p th:text="|${project.time[0]} - ${project.time[1]}|"></p>
                        <p th:text="|${project.patientName}(${project.projectNo})|"></p>
                        <p th:text="|부상부위 : ${project.injuryName}|"></p>
                    </div>
                </th:block>
                <script>
                    const $today = document.getElementById('today');
                    const $day = parseInt(`[[${projects[0].day}]]`.trim());
                    const $date = `[[${ModiToday}]]`;
                    console.log($date+"오늘 날짜");
                    console.log($day);
                    switch($day){
                        case 1:
                            $today.textContent=`${$date} (Sun)`
                            break;
                        case 2:
                            $today.textContent=`${$date} (Mon)`
                            break;
                        case 3:
                            $today.textContent=`${$date} (Tue)`
                            break;
                        case 4:
                            $today.textContent=`${$date} (Wed)`
                            break;
                        case 5:
                            $today.textContent=`${$date} (Thu)`
                            break;
                        case 6:
                            $today.textContent=`${$date} (Fri)`
                            break;
                        case 7:
                            $today.textContent=`${$date} (Sat)`
                            break;
                    }

                </script>

<!--                <div class="schedule-item">-->
<!--                    <p>11:00 - 12:00</p>-->
<!--                    <p>이영희(34725)</p>-->
<!--                    <p>의료 이력: 골절 수술 이력 있음</p>-->
<!--                </div>-->
<!--                <div class="schedule-item">-->
<!--                    <p>13:00 - 14:00</p>-->
<!--                    <p>김진호(35225)</p>-->
<!--                    <p>의료 이력: 특이 사항 없음</p>-->
<!--                </div>-->
                <!-- 기타 스케줄 항목들을 추가할 수 있습니다 -->
            </fieldset>
        </div>


        <div class="box4">
            <div class="title2">Today Menu</div>
            <br>
            <div id="todayMenu">

            </div>
        </div>

        <script>
            fetch("/todayMenu")
                .then(res=>res.json())
                .then(data=>{
                    console.table(data);
                    const todayMenu = document.getElementById('todayMenu');
                    const menu = data.menuName.split(",");
                    menu.forEach(m=>{
                        const $p= document.createElement('p');
                        $p.textContent = m;
                        todayMenu.appendChild($p);
                    })
                })

        </script>
        <div class="box5">
            <div class="mediconnect">
                <div class="title2">mediconnect</div>
                <div class="button-bar">
                    <button class="button-6">내역 1.김땡땡 오른쪽 무릎 </button><br>
                    <button class="button-6">내역 2.조땡땡 왼쪽 발목 골절</button><br>
                    <button class="button-6">내역 3.박땡땡  ~~~~</button><br>
                    <button class="button-6">내역 4.이떙떙 ~~~~~</button>
                </div>
            </div>
        </div>
        <div class="box6">
            <div class="mediconnect">
                <div class="title2">TheraLink</div>
                <div class="button-bar">
                    <button class="button-6">김땡땡 (23423) 오른쪽 무릎 </button><br>
                    <button class="button-6">조땡땡 (24142)왼쪽 발목 골절</button><br>
                    <button class="button-6">박땡땡 (23424) ~~~~</button><br>
                    <button class="button-6">이떙떙 (24164) ~~~~~</button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script src="https://kit.fontawesome.com/56b2fd8c85.js" crossorigin="anonymous"></script>
</html>